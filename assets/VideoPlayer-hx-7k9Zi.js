const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/react-Bb8tSgji.js","assets/index-JX8UTeqW.js","assets/index-D1heT0ut.css","assets/mixin-D3UDm--6.js","assets/hls-Cp2x8l1r.js","assets/react-BfT3vetO.js","assets/index-Bphl0Umo.js","assets/react-Cy6EEDOo.js","assets/react-DuPK5nHn.js","assets/react-mXNRZhc3.js","assets/react-B4yZ_eZI.js","assets/react-CAgoSAVC.js","assets/react-B31U4gTg.js","assets/Preview-DbIEf7_g.js"])))=>i.map(i=>d[i]);
import{R as p,r as t,_ as v,u as K,c as B,j as n}from"./index-JX8UTeqW.js";import{a as Z}from"./styled-components.browser.esm-C1O1rPaP.js";import{v as G}from"./videoPlayerStore-DHzNKTif.js";import{c as T}from"./createLucideIcon-D3SIqxG9.js";import"./index-BIB1RNUT.js";const J=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Q=T("circle-x",J);const ee=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z",key:"b19h5q"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z",key:"h7h5ge"}]],j=T("fast-forward",ee);const te=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],L=T("pause",te);const ae=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],re=T("play",ae);const le=[["path",{d:"M12 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 12 18z",key:"2a1g8i"}],["path",{d:"M22 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 22 18z",key:"rg3s36"}]],O=T("rewind",le),U=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,V=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,M=/\.(m3u8)($|\?)/i,oe=/\.(mpd)($|\?)/i,ne=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,ie=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,se=/vimeo\.com\/(?!progressive_redirect).+/,ce=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,ue=/open\.spotify\.com\/(\w+)\/(\w+)/i,de=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+|(videos?\/|\?video=)\d+)($|\?)/,ye=/tiktok\.com\/(?:player\/v1\/|share\/video\/|@[^/]+\/video\/)([0-9]+)/,R=(e,l)=>{if(Array.isArray(e)){for(const y of e)if(typeof y=="string"&&R(y,l)||R(y.src,l))return!0;return!1}return l(e)},h={html:e=>R(e,l=>U.test(l)||V.test(l)),hls:e=>R(e,l=>M.test(l)),dash:e=>R(e,l=>oe.test(l)),mux:e=>ne.test(e),youtube:e=>ie.test(e),vimeo:e=>se.test(e)&&!V.test(e)&&!M.test(e),wistia:e=>ce.test(e),spotify:e=>ue.test(e),twitch:e=>de.test(e),tiktok:e=>ye.test(e)},me=p.forwardRef((e,l)=>{const y=U.test(`${e.src}`)?"audio":"video";return p.createElement(y,{...e,ref:l},e.children)});var fe=me;const he=[{key:"hls",name:"hls.js",canPlay:h.hls,canEnablePIP:()=>!0,player:t.lazy(()=>v(()=>import("./react-Bb8tSgji.js"),__vite__mapDeps([0,1,2,3,4])))},{key:"dash",name:"dash.js",canPlay:h.dash,canEnablePIP:()=>!0,player:t.lazy(()=>v(()=>import("./react-BfT3vetO.js"),__vite__mapDeps([5,1,2,3])))},{key:"mux",name:"Mux",canPlay:h.mux,canEnablePIP:()=>!0,player:t.lazy(()=>v(()=>import("./index-Bphl0Umo.js"),__vite__mapDeps([6,1,2,4,3])))},{key:"youtube",name:"YouTube",canPlay:h.youtube,player:t.lazy(()=>v(()=>import("./react-Cy6EEDOo.js"),__vite__mapDeps([7,1,2])))},{key:"vimeo",name:"Vimeo",canPlay:h.vimeo,player:t.lazy(()=>v(()=>import("./react-DuPK5nHn.js"),__vite__mapDeps([8,1,2])))},{key:"wistia",name:"Wistia",canPlay:h.wistia,canEnablePIP:()=>!0,player:t.lazy(()=>v(()=>import("./react-mXNRZhc3.js"),__vite__mapDeps([9,1,2])))},{key:"spotify",name:"Spotify",canPlay:h.spotify,canEnablePIP:()=>!1,player:t.lazy(()=>v(()=>import("./react-B4yZ_eZI.js"),__vite__mapDeps([10,1,2])))},{key:"twitch",name:"Twitch",canPlay:h.twitch,canEnablePIP:()=>!1,player:t.lazy(()=>v(()=>import("./react-CAgoSAVC.js"),__vite__mapDeps([11,1,2])))},{key:"tiktok",name:"TikTok",canPlay:h.tiktok,canEnablePIP:()=>!1,player:t.lazy(()=>v(()=>import("./react-B31U4gTg.js"),__vite__mapDeps([12,1,2])))},{key:"html",name:"html",canPlay:h.html,canEnablePIP:()=>!0,player:fe}];var C=he;const ve={width:"320px",height:"180px",volume:1,playbackRate:1,previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}"},H=p.forwardRef((e,l)=>{const{playing:y,pip:m}=e,i=e.activePlayer,a=t.useRef(null),o=t.useRef(!0);t.useEffect(()=>{var r,s;a.current&&(a.current.paused&&y===!0&&a.current.play(),!a.current.paused&&y===!1&&a.current.pause(),a.current.playbackRate=(r=e.playbackRate)!=null?r:1,a.current.volume=(s=e.volume)!=null?s:1)}),t.useEffect(()=>{var r,s,c,f,_;if(!(!a.current||!globalThis.document)){if(m&&!document.pictureInPictureElement)try{(s=(r=a.current).requestPictureInPicture)==null||s.call(r)}catch{}if(!m&&document.pictureInPictureElement)try{(f=(c=a.current).exitPictureInPicture)==null||f.call(c),(_=document.exitPictureInPicture)==null||_.call(document)}catch{}}},[m]);const k=r=>{var s,c;o.current=!0,(s=e.onReady)==null||s.call(e),(c=e.onLoadStart)==null||c.call(e,r)},d=r=>{var s,c;o.current&&(o.current=!1,(s=e.onStart)==null||s.call(e,r)),(c=e.onPlay)==null||c.call(e,r)};if(!i)return null;const u={},x=["onReady","onStart"];for(const r in e)r.startsWith("on")&&!x.includes(r)&&(u[r]=e[r]);return p.createElement(i,{...u,style:e.style,className:e.className,slot:e.slot,ref:t.useCallback(r=>{a.current=r,typeof l=="function"?l(r):l!==null&&(l.current=r)},[l]),src:e.src,crossOrigin:e.crossOrigin,preload:e.preload,controls:e.controls,muted:e.muted,autoPlay:e.autoPlay,loop:e.loop,playsInline:e.playsInline,disableRemotePlayback:e.disableRemotePlayback,config:e.config,onLoadStart:k,onPlay:d},e.children)});H.displayName="Player";var pe=H;const _e=t.lazy(()=>v(()=>import("./Preview-DbIEf7_g.js"),__vite__mapDeps([13,1,2]))),I=[],Pe=(e,l)=>{const y=i=>{for(const a of[...I,...e])if(i&&a.canPlay(i))return a;return l||null},m=p.forwardRef((i,a)=>{const o={...ve,...i},{src:k,slot:d,className:u,style:x,width:r,height:s,fallback:c,wrapper:f}=o,[_,P]=t.useState(!!o.light);t.useEffect(()=>{o.light?P(!0):P(!1)},[o.light]);const E=w=>{var b;P(!1),(b=o.onClickPreview)==null||b.call(o,w)},$=w=>{if(!w)return null;const{light:b,playIcon:N,previewTabIndex:g,oEmbedUrl:A,previewAriaLabel:z}=o;return p.createElement(_e,{src:w,light:b,playIcon:N,previewTabIndex:g,previewAriaLabel:z,oEmbedUrl:A,onClickPreview:E})},X=w=>{var b,N;const g=y(w);if(!g)return null;const{style:A,width:z,height:q,wrapper:S}=o,Y=(b=o.config)==null?void 0:b[g.key];return p.createElement(pe,{...o,ref:a,activePlayer:(N=g.player)!=null?N:g,slot:S?void 0:d,className:S?void 0:u,style:S?{display:"block",width:"100%",height:"100%"}:{display:"block",width:z,height:q,...A},config:Y})},W=f??D,F=c===!1?D:t.Suspense;return p.createElement(W,{slot:d,className:u,style:{width:r,height:s,...x}},p.createElement(F,{fallback:c},_?$(k):X(k)))});return m.displayName="ReactPlayer",m.addCustomPlayer=i=>{I.push(i)},m.removeCustomPlayers=()=>{I.length=0},m.canPlay=i=>{if(i){for(const a of[...I,...e])if(a.canPlay(i))return!0}return!1},m.canEnablePIP=i=>{var a;if(i){for(const o of[...I,...e])if(o.canPlay(i)&&((a=o.canEnablePIP)!=null&&a.call(o)))return!0}return!1},m},D=({children:e})=>e,be=C[C.length-1];var ke=Pe(C,be);const we=Z.div`
  display: block;
  position: fixed;
  z-index: 1;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0, 0, 0, 0.4);
  .box {
    background-color: white;
    margin: 80px auto;
    max-width: 500px;
    min-width: 100px;
    min-height: 350px;
    font: 13px "verdana";
    padding: 10px;
    border-radius: 1rem;
    div {
      padding: 0;
      display: block;
      margin: 10px 0 0 0;
    }
    .heading {
      background-color: #695aa0;
      font-weight: 300;
      text-align: left;
      color: #fff;
      margin: 0 0 1px 0;
      padding: 1rem;
      min-width: 200px;
      max-width: 500px;
      border-radius: 0.8rem 0.8rem 0 0;
    }
    .player {
      background-color: rgba(0, 0, 0, 1);
    }
  }
`,ge=t.memo(ke),xe=()=>{const e=K(),y=B().id,m=t.useRef(null),[i,a]=t.useState(!1),[o,k]=t.useState(!1),{videos:d}=G,u=30,x=t.useCallback(()=>{a(!0),k(!0)},[]),r=t.useCallback(()=>{e("/brain-games/videos")},[e]),s=t.useCallback(()=>{a(E=>!E)},[]);if(!d)return null;const c=d.findIndex(E=>E.id===y),f=d[c];if(!f)return n.jsx("div",{children:"유효하지 않은 영상입니다."});let _=d[c+1];_||(_=d[0]);const P=c<=0?d[d.length-1]:d[c-1];return n.jsx(we,{children:n.jsxs("div",{className:"box",children:[n.jsxs("div",{className:"heading",children:[n.jsx("span",{className:"title text-violet-100 font-semibold",style:{fontSize:"2rem"},children:f.title||"제목"}),n.jsx("span",{className:"category text-violet-200 border-gray-400 border-dotted border-l-2 ml-3 pl-3",children:f.category||"카테고리"}),n.jsx(Q,{className:"float-end badge bg-secondary stroke-purple-200 hover:stroke-purple-300 cursor-pointer",size:u,style:{cursor:"pointer"},onClick:()=>r()})]}),n.jsx("div",{className:"player",children:n.jsx(ge,{src:`https://www.youtube.com/watch?v=${f.id}`,volume:.5,controls:!0,playing:i,width:"100%",height:300,onReady:x,ref:m},f.id)}),n.jsxs("div",{children:[o&&n.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[n.jsx(O,{className:"stroke-purple-500 hover:stroke-purple-900 cursor-pointer",size:u,onClick:()=>e(`/brain-games/videos/${P.id}`)}),i?n.jsx(L,{className:"stroke-purple-500 hover:stroke-purple-900 cursor-pointer",size:u,onClick:()=>s()}):n.jsx(re,{className:"stroke-purple-500 hover:stroke-purple-900 cursor-pointer",size:u,onClick:()=>s()}),n.jsx(j,{className:"stroke-purple-500 hover:stroke-purple-900 cursor-pointer",size:u,onClick:()=>e(`/brain-games/videos/${_.id}`)})]}),!o&&n.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[n.jsx(O,{size:u,className:"stroke-gray-400"}),n.jsx(L,{size:u,className:"stroke-gray-400"}),n.jsx(j,{size:u,className:"stroke-gray-400"})]})]})]})})},Ae=t.memo(xe);export{Ae as default};
